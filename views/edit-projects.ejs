<!DOCTYPE html>
<head lang="en">
    <meta charset="utf-8" />
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-KS9SLJPS9N"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-KS9SLJPS9N');
    </script>
    <script src="https://www.google.com/recaptcha/api.js" async defer></script>
    <script>
        function validateForm() {
            var recaptchaResponse = grecaptcha.getResponse();
            if (recaptchaResponse.length === 0) {
                alert("Please complete the reCAPTCHA.");
                return false;
            }
            return true;
        }
    </script>
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <script src="/js/loadmore.js"></script>
    <link rel="icon" sizes="32x32" href="./images/favicon.png" type="image/png">
    <link rel="icon" sizes="48x48" href="./images/favicon.png" type="image/png">
    <link rel="icon" sizes="64x64" href="./images/favicon.png" type="image/png">

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    
    <title>Maison Infratech - Real Estate Admin Dashboard</title>
    <meta name="description" content="Maison Infratech's Admin Dashboard: Manage and oversee real estate operations, including residential and commercial property listings in Gurgaon.">
    <meta name="keywords" content="real estate consultancy,real estate advisors, real estate realtor, Gurgaon real estate, property investment, buy luxury property, 3bhk flats, 2bhk flats, 4bhk flats, buy property in Gurgaon, Maison Infratech, Buy flat in gurgaon, gurgaon property prices" />
    <link rel="canonical" href="https://maisoninfratech.in/edit-projects" />
    <meta property="og:title" content="Maison Infratech - Real Estate Admin Dashboard" />
    <meta property="og:description" content="Maison Infratech's Admin Dashboard: Manage and oversee real estate operations, including residential and commercial property listings in Gurgaon." />
    <meta property="og:url" content="https://maisoninfratech.in/edit-projects" />
    <meta property="og:image" content="https://maisoninfratech.in/images/maison-new-logo1.jpg" />
    <meta name="robots" content="noindex, nofollow" />
    <link rel="alternate" hreflang="en" href="https://maisoninfratech.in/edit-projects" />
    <script type="application/ld+json">
        {
          "@context": "https://schema.org",
          "@type": "RealEstateAgent",
          "name": "Maison Infratech",
          "url": "https://maisoninfratech.in/edit-projects",
          "logo": "https://maisoninfratech.in/images/maison-new-logo1.jpg",
          "sameAs": [
            "https://www.facebook.com/MaisonInfratechOfficial",
            "https://www.instagram.com/maisoninfratechofficial/",
            "https://in.linkedin.com/company/maison-infratech-pvt-ltd"
          ],
          "contactPoint": {
            "@type": "ContactPoint",
            "telephone": "+91-9999156255",
            "contactType": "Customer Service"
          },
          "address": {
            "@type": "PostalAddress",
            "streetAddress": "Unit No. 610-617, Tower A Spaze 1 Tech Park Sohna Road Sector 49",
            "addressLocality": "Gurgaon",
            "addressRegion": "HR",
            "postalCode": "122018",
            "addressCountry": "IN"
          }
        }
        </script>
    <link rel="stylesheet" href="/css/swiper-bundle.min.css" />
    <link rel="stylesheet" href="/css/property.css">
    <link rel="stylesheet" href="/css/index.css" />

    <link rel="stylesheet" href="/css/footer.css">
    <link rel="stylesheet" href="/css/intlTelInput.css">
    <link rel="stylesheet" href="/css/intlTelInput.min.css">
    <script src="https://kit.fontawesome.com/9c5eb2a5cc.js" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous" />
    <script defer src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-u1OknCvxWvY5kfmNBILK2hRnQC3Pr17a+RTT6rIHI7NnikvbZlHgTPOOmMi466C8"
        crossorigin="anonymous"></script>
    <!-- <script src="js/loadMoreProjects.js"></script> -->
    </head> 
    <%- include("partials/navbar"); -%>

<div class="container">
    <h1 style="text-align: center;">Edit Projects</h1>

    <ul class="list-group">
        <% posts.forEach(function(post) { %>
            <li class="list-group-item d-flex justify-content-between align-items-center" style="font-size: 20px;">
                <%= post.title %>
                <div>
                    <a href="/edit/<%= post._id %>" class="btn btn-primary">Edit</a>
                    <% if (post.state === true) { %>
                        <!-- Show Delist Project button if project is listed -->
                        <button class="btn btn-danger delist-project-btn" data-post-id="<%= post._id %>">Delist Project</button>
                    <% } else { %>
                        <!-- Show List Project button if project is delisted -->
                        <button class="btn btn-success list-project-btn" data-post-id="<%= post._id %>">List Project</button>
                    <% } %>
                    <button class="btn btn-secondary make-top-btn" data-post-id="<%= post._id %>">Make Top</button>
                </div>
            </li>
        <% }); %>
    </ul>
</div>

<script>
    // Add event listener to "Make Top" buttons
    const makeTopButtons = document.querySelectorAll(".make-top-btn");
    makeTopButtons.forEach((button) => {
        button.addEventListener("click", () => {
            const postId = button.dataset.postId;
            // Make AJAX request to the API endpoint
            fetch(`/makeTop/${postId}`, {
                method: "POST"
            })
            .then(response => response.text())
            .then(data => {
                // Handle success response
                console.log(data);
                // Reload the page or update UI as needed
                window.location.reload(); // Example: Reload the page
            })
            .catch(error => {
                // Handle error
                console.error('Error:', error);
            });
        });
    });

    // Add event listener to "List Project" buttons
    const listProjectButtons = document.querySelectorAll(".list-project-btn");
    listProjectButtons.forEach((button) => {
        button.addEventListener("click", () => {
            const postId = button.dataset.postId;
            // Make AJAX request to list the project
            fetch(`/listProject/${postId}`, {
                method: "POST"
            })
            .then(response => response.text())
            .then(data => {
                // Handle success response
                console.log(data);
                // Reload the page or update UI as needed
                window.location.reload(); // Example: Reload the page
            })
            .catch(error => {
                // Handle error
                console.error('Error:', error);
            });
        });
    });

    // Add event listener to "Delist Project" buttons
    const delistProjectButtons = document.querySelectorAll(".delist-project-btn");
    delistProjectButtons.forEach((button) => {
        button.addEventListener("click", () => {
            const postId = button.dataset.postId;
            // Make AJAX request to delist the project
            fetch(`/delistProject/${postId}`, {
                method: "POST"
            })
            .then(response => response.text())
            .then(data => {
                // Handle success response
                console.log(data);
                // Reload the page or update UI as needed
                window.location.reload(); // Example: Reload the page
            })
            .catch(error => {
                // Handle error
                console.error('Error:', error);
            });
        });
    });
</script>
